#!/bin/sh

RED="\033[0;31m"
GREEN="\033[0;32m"
YELLOW="\033[1;33m"
BLUE="\033[0;34m"
NC="\033[0m"

echo "${BLUE}==> Pre-commit: lint (auto-fix)${NC}"
npm run lint:fix || { echo "${RED}Lint failed.${NC}"; exit 1; }
echo "${GREEN}Lint passed.${NC}"

echo "${BLUE}==> Pre-commit: format (auto-fix)${NC}"
npm run format || { echo "${RED}Format failed.${NC}"; exit 1; }
echo "${GREEN}Format passed.${NC}"

echo "${BLUE}==> Pre-commit: tests with coverage${NC}"
npm run test:coverage -- --passWithNoTests || { echo "${RED}Tests failed.${NC}"; exit 1; }
echo "${GREEN}Tests passed.${NC}"
